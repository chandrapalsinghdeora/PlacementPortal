
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Indian Institute of Management Ahmedabad (IIMA) | Home - IIMA</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon"/>
<link rel="stylesheet"
	href="assets/css/bootstrap-datetimepicker.min.css" />
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script> 
	<script type="text/javascript" src="js/jquery.codify.min.js"></script>
	<script type="text/javascript" src="js/htmlbox.colors.js"></script>
	<script type="text/javascript" src="js/htmlbox.styles.js"></script>
	<script type="text/javascript" src="js/htmlbox.syntax.js"></script>
	<script type="text/javascript" src="js/htmlbox.undoredomanager.js"></script>
	<script type="text/javascript" src="js/htmlbox.min.js"></script>

</head>
<body>
	<jsp:include page="commonJsp/Header.jsp" />
	<div class="clearfix"></div>
	<div class="breadcumb-wrapper">
		<div class="clearfix">
			<div class="pull-left">
				<ul class="list-inline link-list">
					<li><a href="addfineValues">Home</a></li>
					<li>Announcement</li>
				</ul>
			</div>

		</div>
	</div>
<div style="color:red;font-size:20px;" id="msg"> </div>
	<div class="space"></div>
	<div class="clearfix"></div>

	<div class="container min-height">

		<div class="panel panel-primary">
			<div class="panel-heading">Announcement</div>
			<div class="panel-body">

				<!--  <form role="form" class="form-horizontal"> -->
				<form method="post" id="announcementId" name="announcement"
					class="form-horizontal" enctype="multipart/form-data">
					<div class="form-group">
						<label class="col-sm-2">Subject</label>
						<div class="col-sm-4">
							<input class="form-control" type="text" name="title" id="title"
								required="required" placeholder="Please enter subject"
								maxlength="50">
						</div>

						<label class="col-sm-1" for="inputPassword1">Date & Time</label>
						<div class="col-sm-5">
							<div class="input-group">
								<input id="date-timepicker1"
									class="form-control input-group date" type="text"
									name="dateTime" required="required"
									placeholder="Please select date and time"> <span
									class="input-group-addon"> <i
									class="fa fa-clock-o bigger-110"></i>
								</span>
							</div>
						</div>

					</div>
					<div class="form-group">
						<label class="col-sm-2">ID's to Post</label>
						<div class="col-sm-4">
							<!-- <input class="form-control" type="text" id="groupToPost"
								name="groupToPost"> -->
							<input type="checkbox" name="pgpgroup" value="1" disabled="disabled"> PGP1<br>
							<input type="checkbox" name="pgpgroup" value="2" disabled="disabled"> PGP2<br>
							<!--   <input type="checkbox" name="groupToPost" value="3"> Laterals<br> onclick="enabletextBox();"-->

							<input type="checkbox" name="pgpgroup" value="3"> Others<br> 
							<input class="form-control" type="text"	name="otherPostText" id="otherPostText" disabled><br>
						</div><br>
						<input type="hidden" value="${returnValue}" id="returnValue" />
						<label class="col-sm-1">Attach File</label>
						<div class="col-sm-5">
							<!--  <input type="file"> -->
							<label class="ace-file-input"> <input
								id="id-input-file-2" type="file" name="fileupload"
								onchange="checkFileType();"
								accept="image/jpg,image/png,image/jpeg,image/gif,.pdf, .csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.presentationml.presentation, .ppt, application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel" > 
								<span class="ace-file-container" data-title="Choose"> </span>
							</label>
							<div>
								<strong style="color: red;">Upload only PDF, Word,
									Excel, PPT and Image(.jpg, .png, .jpeg) File</strong>
							</div>
						</div>
					</div>

					<div class="form-group">
						<!--  <label class="col-sm-2">Urgent</label> -->
						 <label	class="col-sm-2">Description</label>
						<div class="col-sm-10">
							<!-- <textarea class="form-control" rows="5" name="description"
								id="description" required="required"
								placeholder="Write your description here." maxlength="300"></textarea> -->
								     <textarea id="htmlbox_silk_icon_set_blue" name="description" > </textarea> 
	                                 <script type="text/javascript" src="js/htmlbox.content.js"></script> 
						</div>
						
					
						
					</div>
					<div class="form-group">
					<div class="col-sm-2"></div>
					<!--
					<div class="col-sm-4">
					 		<input type="checkbox" name="urgentFlag"> <label>
								Sent to Gmail</label>
						</div> 
					-->
					</div>
					<div class="form-group col-md-12 text-center">
						<input id="sendButton" type="button" value="Send"
							class="btn btn-primary" data-toggle="modal"
							onclick="checkValidation();getValues();" />

						<!-- 	<input type="submit" value="Send" class="btn btn-primary" onclick="checkValidation();" />  -->
						<!-- 	<input type="button" value="Submit" class="btn btn-primary"
							onclick="checkValidation();" />  -->
						<input type="button" value="Cancel" class="btn btn-primary"
							onclick="location.href='getAnnouncement'" />
					</div>
				</form>
			</div>
		</div>
	</div>


	<div class="modal fade" id="C-role-edit" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Announcement Preview</h4>
				</div>

				<input type="hidden" name="companyId" id="companyId" value="0" />
				<div class="modal-body">
					<div class="row">
						<label class="col-md-4">Subject</label>
						<div class="col-md-6">
							<input class="form-control" id="subjectTitle"
								placeholder="Company Name" type="text" 
								required="required" readonly="readonly">
						</div>

					</div>
					<p></p>
					<div class="row">
						<label class="col-md-4">Description</label>
						<div class="col-md-6">
							<!-- <input class="form-control" id="Description"
									placeholder="Description" type="text"
									name="Description" required="required"> -->
							<textarea class="form-control" rows="5" name="Descriptio"
								id="Descri" required="required"  maxlength="500"
								readonly="readonly"></textarea>   
								<!-- <textarea id="htmlbox_silk_icon_set_blue_2"  name="description" readonly="readonly"> </textarea> 
	                                 <script type="text/javascript" src="js/htmlbox.content_2.js"></script> -->   
						</div>

					</div>
				</div>
				<div class="modal-footer text-center">
					<button type="button" class="btn btn-default"
						onclick="submitAnn();">OK</button>
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				</div>

			</div>
		</div>
	</div>
	<div class="space"></div>
	<jsp:include page="commonJsp/Footer.jsp" />


	<script src="assets/js/bootstrap-datepicker.min.js"></script>
	<script src="assets/js/bootstrap-timepicker.min.js"></script>
	<script src="assets/js/moment.min.js"></script>

	<script src="assets/js/bootstrap-datetimepicker.min.js"></script>

	<!-- ace scripts -->
	<!--<script src="assets/js/ace-elements.min.js"></script>-->
	<script src="assets/js/ace.min.js"></script>

	<!-- inline scripts related to this page -->
	<script type="text/javascript">
		jQuery(function($) {

			$('#timepicker1').timepicker({
				minuteStep : 1,
				showSeconds : true,
				showMeridian : false,
				disableFocus : true,
				icons : {
					up : 'fa fa-chevron-up',
					down : 'fa fa-chevron-down'
				},
				defaultDate : moment(),
			}).on('focus', function() {
				$('#timepicker1').timepicker('showWidget');
			}).next().on(ace.click_event, function() {
				$(this).prev().focus();
			});

			if (!ace.vars['old_ie'])

				$('#date-timepicker1').datetimepicker({
					//	format: 'DD-MM-YYYY h:mm:ss A',//use this option to display seconds
					format : 'DD-MM-YYYY HH:mm:ss',
					icons : {
						time : 'fa fa-clock-o',
						date : 'fa fa-calendar',
						up : 'fa fa-chevron-up',
						down : 'fa fa-chevron-down',
						previous : 'fa fa-chevron-left',
						next : 'fa fa-chevron-right',
						today : 'fa fa-arrows ',
						clear : 'fa fa-trash',
						close : 'fa fa-times'
					},
					defaultDate : moment(),
				}).next().on(ace.click_event, function() {
					$(this).prev().focus();
				});

		});

		function enabletextBox() {

			document.getElementById('otherPostText')
					.removeAttribute('disabled');
			document.getElementById('otherPostText').addAttribute('disabled');

		}
	</script>


	<script type="text/javascript">
		$(document)
				.ready(
						function() {

							$(
									'input[type="checkbox"][name="pgpgroup"][value="3"]')
									.click(
											function() {

												if ($(this).prop("checked") == true) {

													//document.getElementById('otherPostText')
													//.removeAttribute('disabled');
													$("#otherPostText")
															.removeAttr(
																	"disabled");

												}

												else if ($(this)
														.prop("checked") == false) {
													$('#otherPostText').val("");
													$("#otherPostText").attr(
															"disabled",
															"disabled");

												}

											});

						});
	</script>


</body>
<script>
function checkValidation() {
	var arr = []
	
	var x = document.getElementsByName("pgpgroup");
	for (var i = 0; i < x.length; i++) {
		if (x[i].checked == true) {
			arr.push("1");
		}
	}

	if (arr.length == 0) {
		$(document).ready(function() {
			//$f("#C-role-edit").hide();
			//$('#C-role-edit').modal('hide');
			alert("Please select atleaset one checkbox.")

			return false;
		});
		
	
		/* break; */
	} 

		var ErrorMessage="";
		var subject= document.getElementById("title").value.toString();
		var textvalue = document.getElementById("htmlbox_silk_icon_set_blue").value.toString();
		var ch=subject.match(/###/g);
		var ch2=textvalue.match(/###/g);
		if(ch=="###"||ch2=="###"){
			if(ch=="###"){
				ErrorMessage="3 continuous # are not allowed in subject";
				$("#msg").html(ErrorMessage);
				return false;
			}
			if(ch2=="###"){
				ErrorMessage="3 continuous # are not allowed in description";
				$("#msg").html(ErrorMessage);
				return false;
			}
			
		}
		else
		{
			document.getElementById("announcementId").action = "addAnnouncement";
			document.getElementById("announcementId").method = "post";
			document.getElementById("announcementId").submit();

		}
      
}

var retVal = document.getElementById("returnValue").value;
if (retVal == 'failure') {

} else if (retVal == 'success') {
	alert("Announcement sent successfully");
}

	function getValues() {

		var Subject = document.getElementById('title').value;
		document.getElementById('subjectTitle').value = Subject;
		document.getElementById('Descri').value = $("#htmlbox_silk_icon_set_blue").val(); 
	}

	function checkFileType() {
		var fileName = document.getElementById("id-input-file-2").value;
		var ext = $('#id-input-file-2').val().split('.').pop().toLowerCase();
		if ($.inArray(ext, [ 'pdf', 'doc', 'docx', 'jpeg', 'jpg', 'png',
				'xlsx','ppt', 'pptx', 'xls' ]) == -1) {
			alert("Only PDF, Word, Excel PPT and Image(.jpg, .png, .jpeg) File are allowed to upload.");
			var fileval = document.getElementById("id-input-file-2");
			fileval.value = '';

		}/* else{
		                alert("inside else condition::");
		               // document.getElementById("fileUploadForm").submit();
		        }   */

	}

	function submitAnn() {
		document.getElementById("announcementId").action = "addAnnouncement";
		document.getElementById("announcementId").method = "post";
		document.forms["announcementId"].submit();
	}
</script>
</html>